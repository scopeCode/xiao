<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.xcrm.core.member">    <update id="deleteMemberPointLevel">    	UPDATE t_t_member_point_level    	SET dataStatus = 0    	WHERE tenantId = #{tenantId}    	      AND id IN 			     <foreach item="item" collection="ids" open="(" separator=","                 close=")">                    #{item}                 </foreach>     </update>        <select id="checkMemberPointLevelRelation" resultType="java.lang.Integer">    	SELECT COUNT(1)    	FROM t_t_member    	WHERE tenantId = #{tenantId}    	      AND level IN 			     <foreach item="item" collection="ids" open="(" separator=","                 close=")">                    #{item}                 </foreach>     </select>            <select id="queryMemberPointLevelWithLock" resultType="com.xcrm.core.member.entity.MemberPointLevel">    	SELECT id,fromPoint,toPoint    	FROM t_t_member_point_level    	WHERE dataStatus = 1 AND tenantId = #{tenantId}    	FOR UPDATE    </select>       	<update id="applyMemberPointLevel">   		UPDATE t_t_member		SET LEVEL = 		(CASE		<foreach item="item" collection="memberPointLevelList">			 WHEN #{item.fromPoint} &lt;= leftPoint AND #{item.realToPoint} &gt;= leftPoint THEN #{item.id}		</foreach>		END)		WHERE tenantId = #{tenantId} AND dataStatus = 1   	</update></mapper>