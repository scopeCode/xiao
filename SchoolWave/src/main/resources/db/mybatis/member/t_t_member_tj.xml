<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"><mapper namespace="com.xcrm.core.memberTj">	<resultMap id="MemberTjResultMap" type="com.xcrm.mt.bis.member.vo.MemberTjResultVo">		<result property="allMemberCount" column="allMemberCount" />		<result property="currentMemberCount" column="currentMemberCount" />	</resultMap>		<select id="queryMemberCountTj" resultMap="MemberTjResultMap">		SELECT COUNT(1) AS allMemberCount,		       COUNT(IF(created &gt;= #{st} AND created &lt;= #{et},1,NULL)) AS currentMemberCount	    FROM t_t_member 		WHERE tenantId = #{tenantId} AND dataStatus = 1	</select>		<resultMap id="MemberAnniversaryTjResultMap" type="com.xcrm.mt.bis.member.vo.MemberAnniversaryTjResultVo">		<result property="mobile" column="mobile" />		<result property="memberName" column="memberName" />		<result property="anniversaryName" column="anniversaryName" />		<result property="anniversaryDate" column="anniversaryDate" />		<result property="id" column="id" />	</resultMap>		<select id="queryMemberAnniversaryTj" resultMap="MemberAnniversaryTjResultMap">		SELECT b.mobile,b.memberName,a.anniversaryName,a.id,a.anniversaryDate		FROM t_t_member_anniversary a		LEFT JOIN t_t_member b ON a.memberId = b.id AND a.tenantId = b.tenantId		WHERE b.dataStatus = 1 AND a.dataStatus = 1 AND a.tenantId = #{tenantId}		      AND CONCAT(#{currentYear},'-',a.anniversaryDate) &gt;= #{currentDate}		      AND b.created &gt;= #{st} AND b.created &lt;= #{et}		ORDER BY a.created DESC,a.id DESC		<if test="start != null and start >= 0 and pageSize != null and pageSize >= 0">			LIMIT #{start},#{pageSize}		</if>		<if test="start != null and start > 0 and pageSize == null">			LIMIT #{pageSize}		</if>	</select>		<select id="queryMemberAnniversaryTj_count" resultType="java.lang.Integer">		SELECT COUNT(1)		FROM t_t_member_anniversary a		LEFT JOIN t_t_member b ON a.memberId = b.id AND a.tenantId = b.tenantId		WHERE b.dataStatus = 1 AND a.dataStatus = 1 AND a.tenantId = #{tenantId} 		      AND CONCAT(#{currentYear},'-',a.anniversaryDate) &gt;= #{currentDate}		      AND b.created &gt;= #{st} AND b.created &lt;= #{et}	</select>		<resultMap id="memberIncreaseTrendMap" type="com.xcrm.mt.bis.member.vo.MemberIncreaseTrendDetailVo">		<result property="stepDate" column="stepDate" />		<result property="onlineDataCount" column="onlineDataCount" />		<result property="offlinDataCount" column="offlinDataCount" />		<result property="allDataCount" column="allDataCount" />	</resultMap>		<select id="queryMemberIncreaseTrendByDay" resultMap="memberIncreaseTrendMap">		SELECT DATE_FORMAT(created, '%Y-%m-%d') AS stepDate ,COUNT(IF(source = 4,1,NULL)) AS onlineDataCount,		       COUNT(IF(source = 3,1,NULL)) AS offlinDataCount,		       COUNT(1) AS allDataCount		FROM t_t_member		WHERE dataStatus =1 AND tenantId = #{tenantId} 		      AND DATE_FORMAT(created, '%Y-%m-%d') &lt;= DATE_FORMAT(#{et}, '%Y-%m-%d')		      AND DATE_FORMAT(created, '%Y-%m-%d') &gt;= DATE_FORMAT(#{st}, '%Y-%m-%d')		GROUP BY stepDate		ORDER BY stepDate ASC	</select>		<select id="queryMemberIncreaseTrendByMonth" resultMap="memberIncreaseTrendMap">		SELECT DATE_FORMAT(created, '%Y-%m') AS stepDate ,COUNT(IF(source = 4,1,NULL)) AS onlineDataCount,		       COUNT(IF(source = 3,1,NULL)) AS offlinDataCount,		       COUNT(1) AS allDataCount		FROM t_t_member		WHERE dataStatus =1 AND tenantId = #{tenantId} 		      AND DATE_FORMAT(created, '%Y-%m') &lt;= DATE_FORMAT(#{et}, '%Y-%m')		      AND DATE_FORMAT(created, '%Y-%m') &gt;= DATE_FORMAT(#{st}, '%Y-%m')		GROUP BY stepDate		ORDER BY stepDate ASC	</select>		<select id="queryMemberIncreaseTrendByYear" resultMap="memberIncreaseTrendMap">		SELECT DATE_FORMAT(created, '%Y') AS stepDate ,COUNT(IF(source = 4,1,NULL)) AS onlineDataCount,		       COUNT(IF(source = 3,1,NULL)) AS offlinDataCount,		       COUNT(1) AS allDataCount		FROM t_t_member		WHERE dataStatus =1 AND tenantId = #{tenantId} 		      AND DATE_FORMAT(created, '%Y') &lt;= DATE_FORMAT(#{et}, '%Y')		      AND DATE_FORMAT(created, '%Y') &gt;= DATE_FORMAT(#{st}, '%Y')		GROUP BY stepDate		ORDER BY stepDate ASC	</select>	</mapper>